<mvc:View controllerName="com.merkavim.ewm.manageprodorder.controller.IssueItems"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m">
    <Page id="issueItemsPage" title="{i18n>prodOrderTileHeader}" showNavButton="true" navButtonPress="onNavBack">
        <VBox id="issueItemsVBox" class="sapUiSmallMargin">
            <!-- Desktop/tablet actions toolbar -->
             <Button id="btnIssueSaveTop" text="{i18n>save}" press="onSave" type="Unstyled" class="doubleHeightButton greenButton"/>
             <VBox id="issueItemsSummaryBox" class="sapUiSmallMarginBottom" justifyContent="Center">
                    <Text id="txtIssueItemsSummary" text="{i18n>summary}" class="sapUiHighlight"/>
            </VBox>
            <!-- Mirror input fields from ProductionOrderContinue (display-only) -->
            <VBox id="issueInputFieldsVBox" class="sapUiSmallMarginBottom">
                <HBox id="issueInputHBoxMat" class="sapUiTinyMarginBottom" alignItems="Center">
                    <Text id="issueInputLblMat" text="{i18n>material}" width="10em" textAlign="End" class="sapUiTinyMarginEnd"/>
                    <Input id="issueInputMat" value="{inputFields>/Material}" width="16em" enabled="false"/>
                </HBox>
                <HBox id="issueInputHBoxMatDesc" class="sapUiTinyMarginBottom" alignItems="Center">
                    <Text id="issueInputLblMatDesc" text="{i18n>materialDescription}" width="10em" textAlign="End" class="sapUiTinyMarginEnd"/>
                    <Input id="issueInputMatDesc" value="{inputFields>/MaterialDescription}" width="16em" enabled="false"/>
                </HBox>
                <HBox id="issueInputHBoxUOM" class="sapUiTinyMarginBottom" alignItems="Center">
                    <Text id="issueInputLblUOM" text="{i18n>uom}" width="10em" textAlign="End" class="sapUiTinyMarginEnd"/>
                    <Input id="issueInputUOM" value="{inputFields>/UOM}" width="16em" enabled="false"/>
                </HBox>
            </VBox>
            <VBox id="summaryInputBox" class="sapUiSmallMarginBottom" direction="Row" alignItems="Center">
                <Text id="txtSummary" text= "{i18n>summary}" class="sapUiSmallMarginEnd"/>
                <Input id="inputSummary" value="" enabled="false" width="16em"/>
            </VBox>
            <!-- Mobile cards (visible on phone) -->
            <VBox id="issueMobileCardsContainer" visible="{= ${device>/isPhone} }">
                <List id="issueMobileCardList" items="{issueItems>/items}" mode="None" showSeparators="All">
                    <items>
                        <CustomListItem id="issueMobileCardListItem">
                            <VBox id="issueMobileCardVBox" class="sapUiSmallMarginBottom sapUiResponsiveMargin">
                                <Text id="issueMobileCardProdOrder" text="{i18n>productionOrder}: {issueItems>AUFNR}" class="sapUiTinyMarginBottom"/>
                                <Text id="issueMobileCardMatDesc" text="{i18n>materialDescription1}: {issueItems>MODEL_DESC}"/>
                                <Text id="issueMobileCardShortBus" text="{i18n>shortbusnum}: {issueItems>CY_SEQNR}"/>
                                <Text id="issueMobileCardQtyToPick" text="{i18n>qtyToPick1}: {issueItems>PICKING_QTY}"/>
                                <Text id="issueMobileCardBatch" text="{i18n>batchnumber}: {issueItems>CHARG}"/>
                                <Text id="issueMobileCardSerial" text="{i18n>serialNumber}: {issueItems>SERNR}"/>
                            </VBox>
                        </CustomListItem>
                    </items>
                </List>
            </VBox>

            <!-- Desktop/tablet table (hidden on phone) -->
            <VBox id="_IDGenVBox2" class="scrollableTableContainer" visible="{= ${device>/isPhone} !== true }">
                <Table id="issueItemsTable" sticky="ColumnHeaders" items="{issueItems>/items}" class="sapUiSmallMarginTop">
                <columns>
                    <Column id="colIssItem"><header><Text id="txtIssItem" text="{i18n>productionOrder}"/></header></Column>
                    <Column id="colIssItemDesc"><header><Text id="txtIssItemDesc" text="{i18n>materialDescription1}"/></header></Column>
                    <Column id="colIssLocation"><header><Text id="txtIssLocation" text="{i18n>shortbusnum}"/></header></Column>                
                    <Column id="colIssDate"><header><Text id="txtIssDate" text="{i18n>qtyToPick1}"/></header></Column>
                    <Column id="colIssInventory"><header><Text id="txtIssInventory" text="{i18n>batchnumber}"/></header></Column>
                    <Column id="colIssQtyInReservation"><header><Text id="txtIssQtyInReservation" text="{i18n>serialNumber}"/></header></Column>
                </columns>
                <items>
                    <ColumnListItem id="cliIssueItem">
                        <cells>
                            <Text id="cellIssItem" text="{issueItems>AUFNR}"/>
                            <Text id="cellIssItemDesc" text="{issueItems>MODEL_DESC}"/>
                            <Text id="cellIssLocation" text="{issueItems>CY_SEQNR}"/>
                           <Text id="cellIssDate" text="{issueItems>PICKING_QTY}"/>
                            <Text id="cellIssInventory" text="{issueItems>CHARG}"/>
                            <Text id="cellIssQtyInReservation" text="{issueItems>SERNR}"/>
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
            </VBox>
        </VBox>
        <footer>
            <Bar id="issueItemsFooterBar" visible="{= ${device>/isPhone} }">
                <contentRight>
                    <ToolbarSpacer id="prodOrderFooterSpacer123"/>
                    <Button id="btnIssueSave" text="{i18n>save}" press="onSave" type="Unstyled" class="doubleHeightButton greenButton"/>
                </contentRight>
            </Bar>
        </footer>
    </Page>
</mvc:View>