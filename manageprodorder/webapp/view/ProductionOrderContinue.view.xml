<mvc:View controllerName="com.merkavim.ewm.manageprodorder.controller.ProductionOrderContinue"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m">
    <Page id="prodOrderContinuePage" title="{i18n>prodOrderTileHeader}" showNavButton="true" navButtonPress="onNavBack">

        <VBox id="continueVBox" class="sapUiSmallMargin">
            <!-- Desktop/tablet actions toolbar -->
                <Toolbar id="prodOrderContinueTopToolbar" visible="{= ${device>/isPhone} !== true }" class="topActionToolbar">
                    <ToolbarSpacer id="prodOrderContinueSpacer" />
                    <Button id="btnClearSelectionTop" text="{i18n>clearSelection}" type="Unstyled" class="sapUiSmallMarginBegin doubleHeightButton lightBlueButton"  press="onClearSelection"/>
                    <Button id="btnDisplayIssueTop" text="{i18n>displayItemsForIssue}"  press="onDisplayIssueItems" type="Unstyled" class="doubleHeightButton greenButton" />
                </Toolbar>
            <!-- Input fields for table columns, aligned vertically -->
            <VBox id="inputFieldsVBox" class="sapUiSmallMarginBottom stickyInputFields">
                <HBox id="hboxInputMaterial" class="sapUiTinyMarginBottom" >
                    <Text id="lblInputMaterial" text="{i18n>material}" width="10em" textAlign="Begin" class="sapUiTinyMarginEnd"/>
                    <Input id="inputMaterial" value="{inputFields>/Material}" placeholder="{i18n>material}" width="16em" enabled="false" textAlign="Begin"/>
                </HBox>
                <HBox id="hboxInputMaterialDescription" class="sapUiTinyMarginBottom" >
                    <Text id="lblInputMaterialDescription" text="{i18n>materialDescription}" width="10em" textAlign="Begin" class="sapUiTinyMarginEnd"/>
                    <Input id="inputMaterialDescription" value="{inputFields>/MaterialDescription}" placeholder="{i18n>materialDescription}" width="16em" enabled="false" textAlign="Begin"/>
                </HBox>
                <HBox id="hboxInputUOM" class="sapUiTinyMarginBottom" >
                    <Text id="lblInputUOM" text="{i18n>uom}" width="10em" textAlign="Begin" class="sapUiTinyMarginEnd"/>
                    <Input id="inputUOM" value="{inputFields>/UOM}" placeholder="{i18n>uom}" width="16em" enabled="false" textAlign="Begin"/>
                </HBox>
                <HBox id="hboxInputLocation" class="sapUiTinyMarginBottom" >
                    <Text id="lblInputLocation" text="{i18n>location}" width="10em" textAlign="Begin" class="sapUiTinyMarginEnd"/>
                    <Input id="inputLocation" value="{inputFields>/Location}" placeholder="{i18n>location}" width="16em" enabled="false" textAlign="Begin"/>
                </HBox>
                <HBox id="hboxInputStock" class="sapUiTinyMarginBottom" >
                    <Text id="lblInputStock" text="{i18n>stock}" width="10em" textAlign="Begin" class="sapUiTinyMarginEnd"/>
                    <Input id="inputStock" value="{inputFields>/Stock}" placeholder="{i18n>stock}" width="16em" enabled="false" textAlign="Begin"/>
                </HBox>
            </VBox>

            <!-- Card-based layout for mobile mode -->
            <VBox id="mobileCardsContainer" visible="{= ${device>/isPhone} }">
                <List id="mobileCardList" items="{pickItems>/items}" mode="None" showSeparators="All">
                    <items>
                        <CustomListItem id="mobileCardListItem">
                            <VBox id="mobileCardVBox" class="sapUiSmallMarginBottom sapUiResponsiveMargin" >
                                <HBox id="mobileCardHeaderHBox" alignItems="Center" justifyContent="End" class="sapUiTinyMarginBottom">
                                    <CheckBox id="mobileCardSelectCheckBox" selected="{pickItems>selected}" select="onSelectRow"/>
                                </HBox>
                                <Text id="mobileCardActionText" text="{i18n>action}: {pickItems>VORNR}" class="sapUiTinyMarginBottom"/>
                                <Text id="mobileCardModelText" text="{i18n>model}: {pickItems>MODEL}"/>
                                <Text id="mobileCardModelDescText" text="{i18n>modelDesc}: {pickItems>MODEL_DESC}"/>
                                <Text id="mobileCardShortBusNumText" text="{i18n>shortbusnum}: {pickItems>CY_SEQNR}"/>
                                <Text id="mobileCardDateText" text="{i18n>date}: {path: 'pickItems>BDTER', formatter: '.formatter.bdterToDDMMYY'}"/>
                                <Text id="mobileCardQtyInReservationText" text="{i18n>qtyInReservation}: {pickItems>RESERVED_QTY}"/>
                                <HBox id="mobileCardQtyToPickHBox" alignItems="Center">
                                    <Text id="mobileCardQtyToPickLabel" text="{i18n>qtyToPick}: "/>
                                    <Input id="mobileCardQtyToPickInput" value="{pickItems>PICKING_QTY}" valueLiveUpdate="true" type="Number" width="4em" liveChange="onQtyToPickLiveChange"/>
                                </HBox>
                            </VBox>
                        </CustomListItem>
                    </items>
                </List>
            </VBox>

            <!-- Table for desktop/tablet only -->
            <VBox id="_IDGenVBox1" class="scrollableTableContainer" visible="{= ${device>/isPhone} !== true }">
                <Table id="pickTable" sticky="ColumnHeaders" items="{pickItems>items}" mode="None" class="sapUiSmallMarginTop">
                    <columns>
                        <Column id="colAction" width="3em">
                            <header>
                                <CheckBox id="selectAllCheckBox" select="onSelectAll"/>
                            </header>
                        </Column>
                        <Column id="colItem"><header><Text id="txtColItem" text="{i18n>action}"/></header></Column>
                        <Column id="colItemDesc"><header><Text id="txtColItemDesc" text="{i18n>model}"/></header></Column>
                        <Column id="colDate"><header><Text id="txtColDate" text="{i18n>modelDesc}"/></header></Column>
                        <Column id="colLocation"><header><Text id="txtColLocation" text="{i18n>shortbusnum}"/></header></Column>
                        <Column id="colInventory"><header><Text id="txtColInventory" text="{i18n>date}"/></header></Column>
                        <Column id="colQtyInReservation"><header><Text id="txtColQtyInReservation" text="{i18n>qtyInReservation}"/></header></Column>
                        <Column id="colQtyToPick"><header><Text id="txtColQtyToPick" text="{i18n>qtyToPick}"/></header></Column>
                    </columns>
                    <items>
                        <ColumnListItem id="pickTableRowTemplate">
                            <cells>
                                <CheckBox id="rowSelectCheckBox" selected="{pickItems>selected}" select="onSelectRow"/>
                                <Text id="rowItem" text="{pickItems>VORNR}"/>
                                <Text id="rowItemDesc" text="{pickItems>MODEL}"/>
                                <Text id="rowDate" text="{pickItems>MODEL_DESC}"/>
                                <Text id="rowLocation" text="{pickItems>CY_SEQNR}"/>
                                <Text id="rowInventory" text="{path: 'pickItems>BDTER', formatter: '.formatter.bdterToDDMMYY'}"/>
                                <Text id="rowQtyInReservation" text="{pickItems>RESERVED_QTY}" width="4em"/>
                                <Input id="rowQtyToPick" value="{pickItems>PICKING_QTY}" valueLiveUpdate="true" type="Number" width="4em" liveChange="onQtyToPickLiveChange"/>
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>
            </VBox>
        </VBox>
        <footer>
            <Bar id="prodOrderContinueFooterBar" visible="{= ${device>/isPhone} }">
                <contentMiddle>
                    <Button id="btnClearSelection" text="{i18n>clearSelection}" type="Unstyled" class="sapUiSmallMarginBegin doubleHeightButton lightBlueButton"  press="onClearSelection"/>
                    <Button id="btnDisplayIssue" text="{i18n>displayItemsForIssue}"  press="onDisplayIssueItems" type="Unstyled" class="doubleHeightButton greenButton" />
                </contentMiddle>
            </Bar>
        </footer>
    </Page>
</mvc:View>